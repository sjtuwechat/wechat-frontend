{"version":3,"sources":["webpack:///./src/pages/bluetooth/main.js","webpack:///./src/pages/bluetooth/index.vue","webpack:///./src/pages/bluetooth/index.vue?a6a0","webpack:///src/pages/bluetooth/index.vue","webpack:///./src/pages/bluetooth/index.vue?60de"],"names":["app","Vue","App","$mount"],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAIC,2CAAJ,CAAQC,uDAAR,CAAZ;AACAF,IAAIG,MAAJ,G;;;;;;;ACJA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,EAAwd;AACle;AACA,yBAAyB,mBAAO,CAAC,CAA8D;AAC/F;AAC2H;AAC3H;AACwU;AACxU;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,mIAAc;AAChB,EAAE,iRAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB;;;;;;;AC3ChC,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyEA;AACA;AACA,MADA,kBACA;AACA;AACA,sBADA;AAEA,kBAFA;AAGA,oBAHA;AAIA,uBAJA;AAKA,sBALA;AAMA,yBANA;AAOA,qBAPA;AAQA,uBARA;AASA,uBATA;AAUA,kBAVA;AAWA,oBAXA;AAYA,oBAZA;AAaA;AAbA;AAeA,GAjBA;AAkBA,QAlBA,oBAkBA;AACA;AACA;AACA,GArBA;AAsBA,QAtBA,oBAsBA;AACA;AACA;AACA;AACA;AACA,KAHA;AAIA,GA5BA;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA,KARA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAMA,OA9BA,MA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA,KAnDA;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA;AAEA;AAFA;AAIA,SARA;AASA;AACA;AACA;AACA,2BADA;AAEA;AAFA;AAIA,SAfA;AAgBA;AACA;AACA;AAlBA;AAoBA,KA1EA;AA2EA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA;AAFA;AAIA,KAnFA;AAoFA;AACA;AACA;AACA,yBADA;AAEA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AARA;AAUA,KAhGA;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AADA;AAGA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAdA;AAeA;AACA;AACA,oCADA;AAEA;AAFA;AAIA;AApBA;AAsBA,SA3BA;AA4BA;AACA;AACA;AACA;AACA,uBADA;AAEA,qCAFA;AAGA;AAHA;AAKA,SApCA;AAqCA;AACA;AACA;AACA;AAxCA;AA0CA,KAvJA;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA,EACA;AACA,uCAFA;AAGA,yCAHA;AAIA,uDAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,6CAFA;AAGA,2DAHA;AAIA,qCAJA;AAKA;AACA;AACA;AACA;AACA,uCADA;AAEA;AAFA;AAIA;AACA,+CADA;AAEA,iDAFA;AAGA,+DAHA;AAIA;AACA;AACA;AANA;AAQA,qBApBA;AAqBA;AACA;AACA;AACA;AACA,6CADA;AAEA;AAFA;AAIA,qBA5BA;AA6BA;AACA;AACA;AACA;AAhCA;AAkCA,iBA7CA;AA8CA;AACA;AACA;AAhDA;AAkDA;AACA;AACA;AACA,SAhEA;AAiEA;AACA;AACA;AAnEA;AAqEA;AACA,KAxOA;AAyOA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BADA,EACA;AACA,uCAFA;AAGA,yCAHA;AAIA,uDAJA;AAKA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,6CAFA;AAGA,2DAHA;AAIA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA,mBAJA;AAKA,iBAtBA;AAuBA;AACA;AACA;AACA;AACA,iBA3BA;AA4BA;AACA;AACA;AA9BA;AAgCA;AACA;AACA,SA7CA;AA8CA;AACA;AACA;AAhDA;AAkDA,KA/RA;AAgSA;AACA;AACA;AACA,KAnSA;AAoSA;AACA;AACA;AACA;AACA,+BADA;AAEA;AACA;AACA,2BADA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAXA;AAaA,KApTA;AAqTA;AACA,4CACA,sBADA,EACA;AACA;AACA,OAHA;AAKA;AACA;AA5TA;AA7BA,G;;;;;;;;;;AC1EA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C","file":"static/js/pages/bluetooth/main.js","sourcesContent":["import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bluetooth/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c291bb2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c291bb2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3c291bb2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/pages/bluetooth/index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-3c291bb2\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-3c291bb2\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/bluetooth/index.vue\n// module id = 10\n// module chunks = 5","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-3c291bb2\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/bluetooth/index.vue\n// module id = 11\n// module chunks = 5","<template>\n  <div class=\"bluetooth\">\n    <div class=\"status\">\n      <text class=\"status-text\">蓝牙设配状态：</text>\n      <div class=\"status-text1\">{{msg}}</div>\n    </div>\n    <div class=\"status\">\n      <text class=\"status-text\">开启蓝牙设备搜索：</text>\n      <switch :checked=searchDevice @change=\"switchChange\" class=\"switch\" color='#096DD9'></switch>\n    </div>\n    <div class=\"devices\">\n      <div class=\"device-list\">\n        <div class=\"weui-cells__title\" style=\"font-size: 13px\">附近蓝牙设备</div>\n        <div class=\"weui-cells weui-cells_after-title\" v-for=\"device in deviceList\">\n          <div class=\"weui-cell\" @click=\"chooseDevice(device)\">\n            <div class=\"weui-cell__bd\" style=\"font-size: 13px\">设备名称：{{device.name}}</div>\n            <div class=\"weui-cell__ft\" style=\"font-size: 13px\">设备ID: {{device.deviceId}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"devices\" v-if=\"nowDevice\">\n      <div class=\"device-list\">\n        <div class=\"weui-cells__title\" style=\"font-size: 13px\">蓝牙设备详细信息</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">设备名称：{{currentDevice.name}}</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">设备ID：{{currentDevice.deviceId}}</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">信号强度：{{currentDevice.RSSI}}</div>\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据：{{currentDevice.advertisData}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据ServiceUUIDs：{{currentDevice.advertisServiceUUIDs}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据localName：{{currentDevice.localName}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据serviceData：{{currentDevice.ServiceData}}</div>-->\n        <button class=\"weui-btn\" type=\"default\" style=\"font-size: 13px;margin-top: 0px;border-radius: 0 0 15px 15px;\" @click=\"confirmConnect(currentDevice.deviceId)\">连接蓝牙设备</button>\n      </div>\n    </div>\n    <div class=\"devices\" v-if=\"nowService\">\n      <div class=\"device-list\">\n        <div class=\"weui-cells__title\" style=\"font-size: 13px\">成功连接的蓝牙设备信息</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">设备名称：{{currentDevice.name}}</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">设备ID：{{currentDevice.deviceId}}</div>\n        <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">信号强度：{{currentDevice.RSSI}}</div>\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据：{{currentDevice.advertisData}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据ServiceUUIDs：{{currentDevice.advertisServiceUUIDs}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据localName：{{currentDevice.localName}}</div>-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">广播数据serviceData：{{currentDevice.ServiceData}}</div>-->\n        <view class=\"weui-cells weui-cells_after-title\">\n          <view class=\"weui-cell weui-cell_input\">\n            <view class=\"weui-cell__bd\">\n              <input class=\"weui-input\" @input='bindMessageInput' placeholder=\"请输入16进制数据\" v-model=\"sendData\" style=\"font-size: 15px\"/>\n              <!--<div v-for=\"service in deviceService\">-->\n              <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">服务uuid：{{service.uuid}}</div>-->\n              <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">服务是否为主服务：{{service.isPrimary}}</div>-->\n              <!--</div>-->\n            </view>\n          </view>\n        </view>\n        <button class=\"weui-btn\" type=\"default\" style=\"font-size: 13px;margin-top: 0px;border-radius: 0 0 15px 15px;\" @click=\"sendMessage\">发送数据</button>\n        <!--<div class=\"weui-cells__title\" style=\"font-size: 13px\">返回的数据</div>-->\n        <!--<div v-for=\"data in dataResult\">-->\n        <!--<div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">0x: {{data}}</div>-->\n        <!--</div>-->\n        <button class=\"weui-btn\" type=\"default\" style=\"font-size: 13px;margin-top: 0px;border-radius: 0 0 15px 15px;\" @click=\"receiveMessage\">接收数据</button>\n        <div class=\"weui-cells__title\" style=\"font-size: 13px\">接收到的数据</div>\n        <div v-for=\"data in reMessage\">\n          <div class=\"weui-cell\" style=\"font-size: 13px;background-color:white\">0x: {{data}}</div>\n        </div>\n        <button class=\"weui-btn\" type=\"default\" style=\"font-size: 13px;margin-top: 0px;border-radius: 0 0 15px 15px;\" @click=\"disconnect\">断开蓝牙连接</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n<script>\n  import 'weui-wxss'\n  export default {\n    data () {\n      return {\n        msg: '蓝牙正在适配...',\n        text: 'Test',\n        deviceList: [],\n        currentDevice: {},\n        nowDevice: false,\n        searchDevice: false,\n        windowHeight: 0,\n        deviceService: {},\n        nowService: false,\n        sendData: '',\n        dataResult: {},\n        writeDatas: '',\n        reMessage: []\n      }\n    },\n    onLoad () {\n      this.getSystemInfo()\n      this.openBluetooth()\n    },\n    onShow () {\n      var that = this\n      wx.onBluetoothAdapterStateChange(function (res) {\n        console.log(`蓝牙设备状态更改`, res.available)\n        that.openBluetooth()\n      })\n    },\n    methods: {\n      getSystemInfo: function () {\n        var that = this\n        wx.getSystemInfo({\n          success: function (res) {\n            that.windowHeight = res.windowHeight\n          }\n        })\n      },\n      switchChange: function () {\n        var that = this\n        if (!that.searchDevice) {\n          that.searchDevice = !that.searchDevice\n          console.log('打开蓝牙设备搜索')\n          wx.getBluetoothAdapterState({\n            success: function (res) {\n              console.log('getBluetoothAdapterState')\n              console.log(res)\n            }\n          })\n          wx.onBluetoothAdapterStateChange(function (res) {\n            console.log('onBluetoothAdapterStateChange')\n            console.log(res.available)\n          })\n          wx.startBluetoothDevicesDiscovery({\n            success: function (res) {\n              console.log('startBluetoothDevicesDiscovery')\n              console.log(res)\n            }\n          })\n          wx.onBluetoothDeviceFound(function (devices) {\n            console.log('onBluetoothDeviceFound')\n            that.deviceList.push(devices.devices[0])\n            console.log(that.deviceList)\n          })\n          wx.getBluetoothDevices({\n            success: function (res) {\n              console.log('getBluetoothDevices')\n              console.log(res)\n            }\n          })\n        } else {\n          // that.deviceList = []\n          // that.currentDevice = {}\n          wx.stopBluetoothDevicesDiscovery({\n            success: function (res) {\n              that.searchDevice = !that.searchDevice\n              console.log('关闭蓝牙设备搜索')\n            }\n          })\n        }\n      },\n      openBluetooth: function () {\n        var that = this\n        wx.openBluetoothAdapter({\n          success: function (res) {\n            console.log('初始化蓝牙适配器成功' + JSON.stringify(res))\n            that.msg = '初始化蓝牙适配器成功'\n            wx.showModal({\n              title: '蓝牙适配情况',\n              content: '初始化蓝牙适配器成功'\n            })\n          },\n          fail: function () {\n            that.msg = '初始化蓝牙适配器失败'\n            wx.showModal({\n              title: '蓝牙适配情况',\n              content: '蓝牙适配失败，请检查手机蓝牙和定位功能是否打开'\n            })\n          },\n          complete: function () {\n            console.log('初始化蓝牙适配器完成')\n          }\n        })\n      },\n      chooseDevice: function (device) {\n        var that = this\n        that.currentDevice = device\n        that.nowDevice = true\n        wx.pageScrollTo({\n          scrollTop: that.windowHeight,\n          duration: 100\n        })\n      },\n      confirmConnect: function (deviceId) {\n        var that = this\n        wx.showModal({\n          title: '连接当前蓝牙设备',\n          success: function (res) {\n            if (res.confirm) {\n              that.connectTo(deviceId)\n            } else if (res.cancel) {\n              console.log('用户点击取消')\n            }\n          }\n        })\n      },\n      connectTo: function (deviceId) {\n        var that = this\n        console.log('连接蓝牙设备搜索', deviceId)\n        wx.stopBluetoothDevicesDiscovery({\n          success: function (res) {\n            that.searchDevice = !that.searchDevice\n            console.log('关闭蓝牙设备搜索')\n          }\n        })\n        wx.showLoading({\n          title: '连接蓝牙设备中...'\n        })\n        wx.createBLEConnection({\n          deviceId: deviceId,\n          success: function (res) {\n            console.log('蓝牙设备连接成功')\n            wx.hideLoading()\n            wx.getBLEDeviceServices({\n              deviceId: deviceId,\n              success: function (res) {\n                that.deviceService = res.services\n                for (var t = 0; t < that.deviceService.length; t++) {\n                  var service = that.deviceService[t]\n                  var serviceId = service.uuid.substring(4, 8)\n                  if (serviceId === 'FFE0') {\n                    that.serviceId = service.uuid\n                  }\n                }\n                that.nowDevice = !that.nowDevice\n                that.nowService = !that.nowService\n                console.log('获取蓝牙设备Service' + res.errMsg)\n              },\n              fail: function (res) {\n                wx.showModal({\n                  title: '设备Service信息',\n                  content: '蓝牙设备连接成功' + '\\n' + '设备信息获取错误' + res.errMsg\n                })\n              }\n            })\n          },\n          fail: function (res) {\n            console.log('蓝牙设备连接失败，请稍后重试')\n            wx.hideLoading()\n            wx.showModal({\n              title: '提示',\n              content: '蓝牙设备连接失败，请稍后重试',\n              duration: 2000\n            })\n          },\n          complete: function () {\n            console.log('蓝牙设备连接完成')\n            wx.hideLoading()\n          }\n        })\n      },\n      sendMessage: function () {\n        let that = this\n        console.log(that.sendData)\n        let data = that.sendData.split(',')\n        let dataBuffer = new ArrayBuffer(data.length)\n        let dataView = new DataView(dataBuffer)\n        for (let j = 0; j < data.length; j++) {\n          dataView.setUint8(j, '0x' + data[j])\n        }\n        that.deviceId = this.currentDevice.deviceId\n        wx.getBLEDeviceCharacteristics({\n          deviceId: that.deviceId,\n          serviceId: that.serviceId,\n          success: function (res) {\n            console.log(res.characteristics)\n            that.deviceCharacteristics = res.characteristics\n            for (var i = 0; i < that.deviceCharacteristics.length; i++) {\n              that.characteristic = that.deviceCharacteristics[i]\n              that.characteristicProperties = that.characteristic.properties\n              if (that.characteristicProperties.notify === true) {\n                that.characteristicId = that.characteristic.uuid\n                wx.notifyBLECharacteristicValueChange({\n                  state: true, // 启用 notify 功能\n                  deviceId: that.deviceId,\n                  serviceId: that.serviceId,\n                  characteristicId: that.characteristicId,\n                  success: function (res) {\n                    console.log('开启notify成功' + that.characteristic.uuid)\n                    for (let i = 0; i < dataView.byteLength; i++) {\n                      var writeData = '0x' + dataView.getUint8(i).toString(16)\n                      that.writeDatas = that.writeDatas + '\\n' + writeData\n                    }\n                    wx.writeBLECharacteristicValue({\n                      deviceId: that.deviceId,\n                      serviceId: that.serviceId,\n                      characteristicId: that.characteristicId,\n                      value: dataBuffer,\n                      success: function (res) {\n                        console.log('发送的数据：' + that.writeDatas)\n                        console.log('message发送成功')\n                        wx.showModal({\n                          title: '数据发送成功',\n                          content: that.writeDatas\n                        })\n                        wx.readBLECharacteristicValue({\n                          deviceId: that.deviceId,\n                          serviceId: that.serviceId,\n                          characteristicId: that.characteristicId,\n                          success: function (res) {\n                            console.log('读取数据成功')\n                          }\n                        })\n                      },\n                      fail: function (res) {\n                        // fail\n                        console.log('message发送失败' + that.characteristicIdw)\n                        wx.showToast({\n                          title: '数据发送失败，请稍后重试',\n                          icon: 'none'\n                        })\n                      },\n                      complete: function (res) {\n                        // fail\n                        console.log('message发送完成')\n                      }\n                    })\n                  },\n                  fail: function () {\n                    console.log('开启notify失败' + that.characteristicId)\n                  }\n                })\n                // that.writeMessage(that.deviceId, that.serviceId, that.characteristicIdw, that.characteristicIdr, that.characteristicIdn)\n              }\n            }\n          },\n          fail: function () {\n            console.log('获取characteristic失败')\n          }\n        })\n        that.writeDatas = []\n      },\n      receiveMessage: function () {\n        let that = this\n        that.deviceId = this.currentDevice.deviceId\n        that.serviceId = that.serviceId\n        wx.getBLEDeviceCharacteristics({\n          deviceId: that.deviceId,\n          serviceId: that.serviceId,\n          success: function (res) {\n            console.log(res.characteristics)\n            that.deviceCharacteristics = res.characteristics\n            for (var i = 0; i < that.deviceCharacteristics.length; i++) {\n              that.characteristic = that.deviceCharacteristics[i]\n              that.characteristicProperties = that.characteristic.properties\n              if (that.characteristicProperties.notify === true) {\n                that.characteristicId = that.characteristic.uuid\n                wx.notifyBLECharacteristicValueChange({\n                  state: true, // 启用 notify 功能\n                  deviceId: that.deviceId,\n                  serviceId: that.serviceId,\n                  characteristicId: that.characteristicId,\n                  success: function (res) {\n                    console.log('开启notify成功' + that.characteristic.uuid)\n                    console.log(that.characteristicProperties.write)\n                    console.log(that.characteristicProperties.read)\n                    wx.readBLECharacteristicValue({\n                      deviceId: that.deviceId,\n                      serviceId: that.serviceId,\n                      characteristicId: that.characteristicId,\n                      success: function (res) {\n                        console.log('接收数据成功')\n                      }\n                    })\n                    wx.onBLECharacteristicValueChange(function (res) {\n                      console.log('接收数据:', that.ab2hex(res.value))\n                      var recMessage = that.ab2hex(res.value)\n                      that.reMessage.push(recMessage)\n                    })\n                  },\n                  fail: function () {\n                    console.log('开启notify失败' + that.characteristicId)\n                    console.log(that.characteristicProperties.write)\n                    console.log(that.characteristicProperties.read)\n                  },\n                  complete: function () {\n                    console.log('开启完成')\n                  }\n                })\n              }\n            }\n          },\n          fail: function () {\n            console.log('获取characteristic失败')\n          }\n        })\n      },\n      bindMessageInput: function (e) {\n        var that = this\n        that.inputValue = e.mp.detail.value\n      },\n      disconnect: function () {\n        var that = this\n        that.deviceId = this.currentDevice.deviceId\n        wx.closeBLEConnection({\n          deviceId: that.deviceId,\n          success: function (res) {\n            wx.showModal({\n              title: '设备连接情况',\n              content: '蓝牙设备已经断开'\n            })\n            that.nowDevice = false\n            that.currentDevice = {}\n            that.nowService = false\n            that.deviceService = {}\n          }\n        })\n      },\n      ab2hex: function (buffer) {\n        var hexArr = Array.prototype.map.call(\n          new Uint8Array(buffer), function (bit) {\n            return ('00' + bit.toString(16)).slice(-2)\n          }\n        )\n        return hexArr.join('')\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n  .status {\n    background-color: white;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n    border-bottom: 2px solid #e8e8e8;\n  }\n  .status-text {\n    margin-left:10px;\n    font-size: 15px;\n    width:40%\n  }\n\n  .status-text1 {\n    height:30px;\n    background-color:#e8e8e8;\n    margin-left:10px;\n    font-size: 13px;\n    border-radius: 15px;\n    margin-top: 5px;\n    width: 50%;\n    text-align: center;\n    line-height: 30px;\n    color: black;\n  }\n\n  .switch {\n    margin-left:10px;\n    width: 50%;\n    text-align: center;\n  }\n\n  .devices {\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n  }\n\n  .device-list {\n    margin-top: 15px;\n    font-size: 3px;\n    border: 3px solid #e8e8e8;\n    border-radius: 15px;\n    width: 94%;\n  }\n\n  .inputMessage {\n    text-align: center;\n    font-size: 13px;\n  }\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/bluetooth/index.vue?019d6dc0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"bluetooth\"\n  }, [_c('div', {\n    staticClass: \"status\"\n  }, [_c('text', {\n    staticClass: \"status-text\"\n  }, [_vm._v(\"蓝牙设配状态：\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"status-text1\"\n  }, [_vm._v(_vm._s(_vm.msg))])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"status\"\n  }, [_c('text', {\n    staticClass: \"status-text\"\n  }, [_vm._v(\"开启蓝牙设备搜索：\")]), _vm._v(\" \"), _c('switch', {\n    staticClass: \"switch\",\n    attrs: {\n      \"checked\": _vm.searchDevice,\n      \"color\": \"#096DD9\",\n      \"eventid\": '0'\n    },\n    on: {\n      \"change\": _vm.switchChange\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"devices\"\n  }, [_c('div', {\n    staticClass: \"device-list\"\n  }, [_c('div', {\n    staticClass: \"weui-cells__title\",\n    staticStyle: {\n      \"font-size\": \"13px\"\n    }\n  }, [_vm._v(\"附近蓝牙设备\")]), _vm._v(\" \"), _vm._l((_vm.deviceList), function(device, index) {\n    return _c('div', {\n      staticClass: \"weui-cells weui-cells_after-title\"\n    }, [_c('div', {\n      staticClass: \"weui-cell\",\n      attrs: {\n        \"eventid\": '1-' + index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.chooseDevice(device)\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"weui-cell__bd\",\n      staticStyle: {\n        \"font-size\": \"13px\"\n      }\n    }, [_vm._v(\"设备名称：\" + _vm._s(device.name))]), _vm._v(\" \"), _c('div', {\n      staticClass: \"weui-cell__ft\",\n      staticStyle: {\n        \"font-size\": \"13px\"\n      }\n    }, [_vm._v(\"设备ID: \" + _vm._s(device.deviceId))])])])\n  })], 2)]), _vm._v(\" \"), (_vm.nowDevice) ? _c('div', {\n    staticClass: \"devices\"\n  }, [_c('div', {\n    staticClass: \"device-list\"\n  }, [_c('div', {\n    staticClass: \"weui-cells__title\",\n    staticStyle: {\n      \"font-size\": \"13px\"\n    }\n  }, [_vm._v(\"蓝牙设备详细信息\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"设备名称：\" + _vm._s(_vm.currentDevice.name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"设备ID：\" + _vm._s(_vm.currentDevice.deviceId))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"信号强度：\" + _vm._s(_vm.currentDevice.RSSI))]), _vm._v(\" \"), _c('button', {\n    staticClass: \"weui-btn\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"margin-top\": \"0px\",\n      \"border-radius\": \"0 0 15px 15px\"\n    },\n    attrs: {\n      \"type\": \"default\",\n      \"eventid\": '2'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.confirmConnect(_vm.currentDevice.deviceId)\n      }\n    }\n  }, [_vm._v(\"连接蓝牙设备\")])], 1)]) : _vm._e(), _vm._v(\" \"), (_vm.nowService) ? _c('div', {\n    staticClass: \"devices\"\n  }, [_c('div', {\n    staticClass: \"device-list\"\n  }, [_c('div', {\n    staticClass: \"weui-cells__title\",\n    staticStyle: {\n      \"font-size\": \"13px\"\n    }\n  }, [_vm._v(\"成功连接的蓝牙设备信息\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"设备名称：\" + _vm._s(_vm.currentDevice.name))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"设备ID：\" + _vm._s(_vm.currentDevice.deviceId))]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cell\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"background-color\": \"white\"\n    }\n  }, [_vm._v(\"信号强度：\" + _vm._s(_vm.currentDevice.RSSI))]), _vm._v(\" \"), _c('view', {\n    staticClass: \"weui-cells weui-cells_after-title\"\n  }, [_c('view', {\n    staticClass: \"weui-cell weui-cell_input\"\n  }, [_c('view', {\n    staticClass: \"weui-cell__bd\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.sendData),\n      expression: \"sendData\"\n    }],\n    staticClass: \"weui-input\",\n    staticStyle: {\n      \"font-size\": \"15px\"\n    },\n    attrs: {\n      \"placeholder\": \"请输入16进制数据\",\n      \"eventid\": '3'\n    },\n    domProps: {\n      \"value\": (_vm.sendData)\n    },\n    on: {\n      \"input\": [function($event) {\n        if ($event.target.composing) { return; }\n        _vm.sendData = $event.target.value\n      }, _vm.bindMessageInput]\n    }\n  })])])]), _vm._v(\" \"), _c('button', {\n    staticClass: \"weui-btn\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"margin-top\": \"0px\",\n      \"border-radius\": \"0 0 15px 15px\"\n    },\n    attrs: {\n      \"type\": \"default\",\n      \"eventid\": '4'\n    },\n    on: {\n      \"click\": _vm.sendMessage\n    }\n  }, [_vm._v(\"发送数据\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"weui-btn\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"margin-top\": \"0px\",\n      \"border-radius\": \"0 0 15px 15px\"\n    },\n    attrs: {\n      \"type\": \"default\",\n      \"eventid\": '5'\n    },\n    on: {\n      \"click\": _vm.receiveMessage\n    }\n  }, [_vm._v(\"接收数据\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"weui-cells__title\",\n    staticStyle: {\n      \"font-size\": \"13px\"\n    }\n  }, [_vm._v(\"接收到的数据\")]), _vm._v(\" \"), _vm._l((_vm.reMessage), function(data, index) {\n    return _c('div', [_c('div', {\n      staticClass: \"weui-cell\",\n      staticStyle: {\n        \"font-size\": \"13px\",\n        \"background-color\": \"white\"\n      }\n    }, [_vm._v(\"0x: \" + _vm._s(data))])])\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"weui-btn\",\n    staticStyle: {\n      \"font-size\": \"13px\",\n      \"margin-top\": \"0px\",\n      \"border-radius\": \"0 0 15px 15px\"\n    },\n    attrs: {\n      \"type\": \"default\",\n      \"eventid\": '6'\n    },\n    on: {\n      \"click\": _vm.disconnect\n    }\n  }, [_vm._v(\"断开蓝牙连接\")])], 2)]) : _vm._e()])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-3c291bb2\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-3c291bb2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/bluetooth/index.vue\n// module id = 16\n// module chunks = 5"],"sourceRoot":""}